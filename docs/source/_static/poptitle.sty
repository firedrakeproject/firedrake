\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{poptitle}[2023/01/18 Firedrake manual title page.]

\RequirePackage{fontspec}
\setsansfont{TeX Gyre Heros}
\RequirePackage[british]{babel}
\RequirePackage[utf8]{inputenc}
\RequirePackage[absolute]{textpos}
\RequirePackage{xcolor}
\RequirePackage{graphicx}
\RequirePackage{etoolbox}
\RequirePackage[
    type={CC},
    modifier={by},
    version={4.0},
]{doclicense}
\RequirePackage{fmtcount}
\RequirePackage{hyperref}
\RequirePackage{titling}

\newcommand{\editions}{}
\newcommand{\edition}[1]{\listadd{\editions}{#1}}
\makeatletter
\providecommand\subtitle[1]{\renewcommand\thesubtitle{#1}}
\newcommand\thesubtitle{\@latex@error{No \noexpand\subtitle given}\@ehc}
\makeatother

\setlength{\TPHorizModule}{1mm}
\setlength{\TPVertModule}{\TPHorizModule}
\textblockorigin{0mm}{0mm}


\definecolor{imperialblue}{cmyk}{1,.61,0,.45}

\newcommand{\poptitlepages}{
\clearpage
\thispagestyle{empty}
    \newcounter{edcnt}
    \setcounter{edcnt}{0}
    \renewcommand*{\do}[1]{\stepcounter{edcnt}
\ifdefined\thisedition
    \renewcommand{\thisedition}{\Ordinalstring{edcnt} edition}
\else
    \newcommand{\thisedition}{}
\fi
}
    \dolistloop{\editions}

% \begin{textblock}{70}(17.5,17.5)
%     \noindent\includegraphics[width=70mm]{imperial.pdf}
% \end{textblock}
% \begin{textblock}{210}(0,279)
%     \noindent\rule{210mm}{.5mm}
% \end{textblock}
% \begin{textblock}{30}(190,-5)
%     {\color{imperialblue}
%     \noindent\rule[-5mm]{21mm}{300mm}}
% \end{textblock}
% \begin{textblock}{210}(17.5,284.5)
%     {\sffamily\fontsize{25}{30}\selectfont
%     \noindent Course Notes in Mathematics}
% \end{textblock}
% \begin{textblock}{30}(185,284.5)
%     {\sffamily\fontsize{25}{30}\selectfont\centering\color{white}\bfseries
%     \thevolcnt

%     }
%  %\rule{15mm,297mm}
%\end{textblock}
\begin{textblock}{154}(17.5,74.25)
    \setlength{\parskip}{2ex}
    {\sffamily\fontsize{25}{30}\selectfont\noindent\thetitle}

    {\sffamily\fontsize{17}{20}\selectfont\noindent\thesubtitle
    \vspace{\parskip}

    \noindent\Large\theauthor
    \vspace{7\parskip}

    \noindent{\itshape\thisedition}}
\end{textblock}

\mbox{}
\pagebreak

\begin{textblock}{146}[0,1](17.5,230.5)
    {
     %\hypersetup{urlcolor=imperialblue}
    \sffamily\fontsize{12}{14}\selectfont
    \setcounter{edcnt}{0}
    \renewcommand*{\do}[1]{\stepcounter{edcnt}\noindent\Ordinalstring{edcnt} edition: ##1
    \vspace{1ex}

    }
    \dolistloop{\editions}
    \vspace{2ex}
    \noindent\copyright\ \theauthor
    \doclicenseThis
    }
\end{textblock}
\mbox{}
\setcounter{page}{0}
\thispagestyle{empty}
\clearpage
}
